# Defacto Backend Framework Makefile

UNAME_S := $(shell uname -s)

ifeq ($(UNAME_S),Darwin)
    ADDON_EXT = dylib
else ifeq ($(UNAME_S),Linux)
    ADDON_EXT = so
else
    ADDON_EXT = dll
endif

ADDON = target/release/libdefacto_backend.$(ADDON_EXT)

.PHONY: all clean test release debug

all: release

release:
	@echo "ðŸ¦€ Building Defacto Backend (release)..."
	cargo build --release
	@echo "âœ… Built: $(ADDON)"

debug:
	@echo "ðŸ¦€ Building Defacto Backend (debug)..."
	cargo build
	@echo "âœ… Built: target/debug/libdefacto_backend.$(ADDON_EXT)"

test:
	@echo "ðŸ§ª Running tests..."
	cargo test

clean:
	@echo "ðŸ§¹ Cleaning..."
	cargo clean
